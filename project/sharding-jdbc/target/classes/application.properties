server.port=6666

spring.profiles.active=pos
#spring.application.name = sharding-jdbc-test
#
#spring.http.encoding.enabled = true
#spring.http.encoding.charset = UTF-8
#spring.http.encoding.force = true
#
#spring.main.allow-bean-definition-overriding = true
#
#mybatis.configuration.map-underscore-to-camel-case = true
#
##sharding-jdbcåˆ†ç‰‡è§„åˆ™é…ç½®
##æ•°æ®æº?
#spring.shardingsphere.datasource.names = m0,m1,m2,s0,s1,s2
#
#spring.shardingsphere.datasource.m0.type = com.alibaba.druid.pool.DruidDataSource
#spring.shardingsphere.datasource.m0.driver-class-name = com.mysql.cj.jdbc.Driver
#spring.shardingsphere.datasource.m0.url = jdbc:mysql://localhost:3306/product_db_1?useUnicode=true&characterEncoding=utf-8&serverTimezone=UTC
#spring.shardingsphere.datasource.m0.username = root
#spring.shardingsphere.datasource.m0.password = 123456
#
#spring.shardingsphere.datasource.m1.type = com.alibaba.druid.pool.DruidDataSource
#spring.shardingsphere.datasource.m1.driver-class-name = com.mysql.cj.jdbc.Driver
#spring.shardingsphere.datasource.m1.url = jdbc:mysql://localhost:3306/product_db_2?useUnicode=true&characterEncoding=utf-8&serverTimezone=UTC
#spring.shardingsphere.datasource.m1.username = root
#spring.shardingsphere.datasource.m1.password = 123456
#
#spring.shardingsphere.datasource.m2.type = com.alibaba.druid.pool.DruidDataSource
#spring.shardingsphere.datasource.m2.driver-class-name = com.mysql.cj.jdbc.Driver
#spring.shardingsphere.datasource.m2.url = jdbc:mysql://localhost:3306/store_db?useUnicode=true&characterEncoding=utf-8&serverTimezone=UTC
#spring.shardingsphere.datasource.m2.username = root
#spring.shardingsphere.datasource.m2.password = 123456
#
#spring.shardingsphere.datasource.s0.type = com.alibaba.druid.pool.DruidDataSource
#spring.shardingsphere.datasource.s0.driver-class-name = com.mysql.cj.jdbc.Driver
#spring.shardingsphere.datasource.s0.url = jdbc:mysql://localhost:3307/product_db_1?useUnicode=true&characterEncoding=utf-8&serverTimezone=UTC
#spring.shardingsphere.datasource.s0.username = root
#spring.shardingsphere.datasource.s0.password = 123456
#
#spring.shardingsphere.datasource.s1.type = com.alibaba.druid.pool.DruidDataSource
#spring.shardingsphere.datasource.s1.driver-class-name = com.mysql.cj.jdbc.Driver
#spring.shardingsphere.datasource.s1.url = jdbc:mysql://localhost:3307/product_db_2?useUnicode=true&characterEncoding=utf-8&serverTimezone=UTC
#spring.shardingsphere.datasource.s1.username = root
#spring.shardingsphere.datasource.s1.password = 123456
#
#spring.shardingsphere.datasource.s2.type = com.alibaba.druid.pool.DruidDataSource
#spring.shardingsphere.datasource.s2.driver-class-name = com.mysql.cj.jdbc.Driver
#spring.shardingsphere.datasource.s2.url = jdbc:mysql://localhost:3307/store_db?useUnicode=true&characterEncoding=utf-8&serverTimezone=UTC
#spring.shardingsphere.datasource.s2.username = root
#spring.shardingsphere.datasource.s2.password = 123456
#
## ä¸»åº“ä»åº“é€»è¾‘æ•°æ®æºå®šä¹?
#spring.shardingsphere.sharding.masterâ€slaveâ€rules.db0.master-data-source-name=m0
#spring.shardingsphere.sharding.masterâ€slaveâ€rules.db0.slave-data-source-names[]=s0
#
#spring.shardingsphere.sharding.masterâ€slaveâ€rules.db1.master-data-source-name=m1
#spring.shardingsphere.sharding.masterâ€slaveâ€rules.db1.slave-data-source-names[]=s1
#
#spring.shardingsphere.sharding.masterâ€slaveâ€rules.db2.master-data-source-name=m2
#spring.shardingsphere.sharding.masterâ€slaveâ€rules.db2.slave-data-source-names[]=s2
#
## é»˜è®¤åˆ†åº“ç­–ç•¥ï¼Œä»¥store_info_idä¸ºåˆ†ç‰‡é”®ï¼Œåˆ†ç‰‡ç­–ç•¥ä¸ºstore_info_id % 2 + 1ï¼Œä¹Ÿå°±æ˜¯store_info_idä¸ºåŒæ•°çš„æ•°æ®è¿›å…¥ds1ï¼Œä¸ºå•æ•°çš„è¿›å…¥ds2
#spring.shardingsphere.sharding.defaultâ€databaseâ€strategy.inline.shardingâ€column = store_info_id
#spring.shardingsphere.sharding.defaultâ€databaseâ€strategy.inline.algorithmâ€expression = db$â€?>{store_info_id % 2 + 1}
## é…ç½®çœŸå®èŠ‚ç‚¹
#spring.shardingsphere.sharding.tables.store_info.actualâ€dataâ€nodes = db0.store_info
## store_infoåˆ†è¡¨ç­–ç•¥ï¼Œå›ºå®šåˆ†é…è‡³sdbçš„store_infoçœŸå®è¡¨ï¼Œ
#spring.shardingsphere.sharding.tables.store_info.tableâ€strategy.inline.shardingâ€column = id
#spring.shardingsphere.sharding.tables.store_info.tableâ€strategy.inline.algorithmâ€expression =store_info
#
## çœŸå®èŠ‚ç‚¹
#spring.shardingsphere.sharding.tables.product_info.actualâ€dataâ€nodes = dbâ€?>{1..2}.product_info_$â€?>{1..2}
## é…ç½®ä¸»é”®ç”Ÿæˆç­–ç•¥ product_info_idç”Ÿæˆä¸ºé›ªèŠ±ç®—æ³?
#spring.shardingsphere.sharding.tables.product_info.keyâ€generator.column=product_info_id
#spring.shardingsphere.sharding.tables.product_info.keyâ€generator.type=SNOWFLAKE
## product_infoåˆ†è¡¨ç­–ç•¥ï¼Œåˆ†å¸ƒåœ¨ds1,ds2çš„product_info_1 product_info_2è¡? ï¼?
#spring.shardingsphere.sharding.tables.product_info.tableâ€strategy.inline.shardingâ€column =product_info_id
#spring.shardingsphere.sharding.tables.product_info.tableâ€strategy.inline.algorithmâ€expression =product_info_$â€?>{product_info_id % 2 + 1}
#
## çœŸå®èŠ‚ç‚¹
#spring.shardingsphere.sharding.tables.product_descript.actualâ€dataâ€nodes = db$â€?>{1..2}.product_descript_$â€?>{1..2}
## é…ç½®ä¸»é”®ç”Ÿæˆç­–ç•¥ idç”Ÿæˆä¸ºé›ªèŠ±ç®—æ³?
#spring.shardingsphere.sharding.tables.product_descript.keyâ€generator.column=id
#spring.shardingsphere.sharding.tables.product_descript.keyâ€generator.type=SNOWFLAKE
## product_descriptåˆ†è¡¨ç­–ç•¥ï¼Œåˆ†å¸ƒåœ¨ds1,ds2çš„product_descript_1 product_descript_2è¡?
#spring.shardingsphere.sharding.tables.product_descript.tableâ€strategy.inline.shardingâ€column =product_info_id
#spring.shardingsphere.sharding.tables.product_descript.tableâ€strategy.inline.algorithmâ€expression = product_descript_$â€?>{product_info_id % 2 + 1}
#
## è®¾ç½®product_info,product_descriptä¸ºç»‘å®šè¡¨
#spring.shardingsphere.sharding.bindingâ€tables[0] = product_info,product_descript
#
## æŒ‡å®št_dictä¸ºå…¬å…±è¡¨
#spring.shardingsphere.sharding.broadcast-tables=region
## æ‰“å¼€sqlè¾“å‡ºæ—¥å¿—
#spring.shardingsphere.props.sql.show = true

#
## åˆ†åº“ç­–ç•¥ï¼Œä»¥user_idä¸ºåˆ†ç‰‡é”®ï¼Œåˆ†ç‰‡ç­–ç•¥ä¸ºuser_id % 2 + 1ï¼Œuser_idä¸ºå¶æ•°æ“ä½œm1æ•°æ®æºï¼Œå¦åˆ™æ“ä½œm2ã€?
#spring.shardingsphere.sharding.tables.t_order.database-strategy.inline.sharding-column = user_id
#spring.shardingsphere.sharding.tables.t_order.database-strategy.inline.algorithm-expression = m$->{user_id % 3 + 1}
#
## æŒ‡å®št_orderè¡¨çš„æ•°æ®åˆ†å¸ƒæƒ…å†µï¼Œé…ç½®æ•°æ®èŠ‚ç‚? m1.t_order_1,m1.t_order_2
#spring.shardingsphere.sharding.tables.t_order.actual-data-nodes = m$->{1..3}.t_order$->{1..2}
#spring.shardingsphere.sharding.tables.t_user.actual-data-nodes = ds0.t_user
#
## æŒ‡å®št_orderè¡¨çš„ä¸»é”®ç”Ÿæˆç­–ç•¥ä¸ºSNOWFLAKE
#spring.shardingsphere.sharding.tables.t_order.key-generator.column=id
#spring.shardingsphere.sharding.tables.t_order.key-generator.type=SNOWFLAKE
#
## æŒ‡å®št_orderè¡¨çš„åˆ†ç‰‡ç­–ç•¥ï¼Œåˆ†ç‰‡ç­–ç•¥åŒ…æ‹¬åˆ†ç‰‡é”®å’Œåˆ†ç‰‡ç®—æ³?
#spring.shardingsphere.sharding.tables.t_order.table-strategy.inline.sharding-column = id
#spring.shardingsphere.sharding.tables.t_order.table-strategy.inline.algorithm-expression = t_order$->{id % 2 + 1}
#
#spring.shardingsphere.sharding.tables.t_user.table-strategy.inline.sharding-column = user_id
#spring.shardingsphere.sharding.tables.t_user.table-strategy.inline.algorithm-expression = t_user
#
#
#
