<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
    <link
            href="https://cdn.bootcss.com/twitter-bootstrap/4.1.3/css/bootstrap.min.css"
            rel="stylesheet">
    <script src="https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/vue/2.6.10/vue.min.js"></script>
    <script src="https://cdn.bootcss.com/layer/2.3/layer.js"></script>
    <script
            src="https://cdn.bootcss.com/jquery-validate/1.19.1/jquery.validate.min.js"></script>
    <link
            href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"
            rel="stylesheet">

</head>
<body>
<div th:each="u: ${session.user}">
    <img th:src="${u.spare1}"
         style="position: fixed; left: 150px; top: 200px; width: '5%';">
</div>

<h1 class="text-center text-danger mt-5">ä¸ªäººä¸­å¿ƒ</h1>
<div class="container  container-fluid text-white">
    <div class="jumbotron  mt-3 mr-8 text-center text-white">

        <button class="text-letf btn text-danger" onclick="getMessage();">æŸ¥è¯¢ç§¯åˆ†</button>


        <form class="javascript: text-center text-red" name="my"
              action="updateUser" onsubmit="return va()" method="post"></form>

        <div class=" mt-3  btn btn-outline-warning ">
            è´¦æˆ·ä¿®æ”¹ 6-10ä½æ•°å­—æˆ–å­—æ¯<input id="account"
                                  style="width: 200px; height: 30px;" class="ml-3" type="text"
                                  placeholder="_è¯·è¾“å…¥æ‚¨çš„è´¦æˆ·å"/> <i class="btn fa fa-refresh ml-2"
                                                               aria-hidden="true" onclick="goinAccount();"></i>
        </div>
        <div></div>
        <div class="mt-3  btn btn-outline-warning">
            æ˜µç§°ä¿®æ”¹ 6-10ä½æ•°å­—æˆ–å­—æ¯<input id="realname"
                                  style="width: 200px; height: 30px;" class="ml-3 " type="text"
                                  placeholder="_è¯·è¾“å…¥æ‚¨çš„æ˜µç§° "/><i class="btn fa fa-refresh ml-2"
                                                              aria-hidden="true" onclick="goinRealName();"></i>
        </div>

        <div></div>
        <div class="mt-3  btn btn-outline-warning">
            å¯†ç ä¿®æ”¹ 6-10ä½æ•°å­—æˆ–å­—æ¯<input id="password"
                                  style="width: 200px; height: 30px;" class="ml-3 " type="text"
                                  placeholder="_è¯·è¾“å…¥æ‚¨çš„å¯†ç  "/><i class="btn fa fa-refresh ml-2"
                                                              aria-hidden="true" onclick="goinPassword();"></i>
        </div>

        <div></div>
        <div class="mt-3  btn btn-outline-warning">
            åœ°å€ä¿®æ”¹ ä»…æ”¯æŒä¸­å›½å¤§é™† <input id="dizhi" style="width: 200px; height: 30px;"
                                class="ml-4 " type="text" placeholder="_è¯·è¾“å…¥æ‚¨çš„åœ°å€ "/><i
                class="btn fa fa-refresh ml-2" aria-hidden="true"
                onclick="goinDizhi();" data-toggle="popover"
                data-content="æ·»åŠ åè¯¥åœ°å€ä¸ºé»˜è®¤åœ°å€"></i>
        </div>

        <div></div>
        <div class="mt-3 btn btn-outline-warning">
            å‘é€éªŒè¯ç  ä»…æ”¯æŒQQé‚®ç®±<input id="mail" style="width: 200px; height: 30px;"
                                class="ml-4 " type="text" placeholder="_è¯·è¾“å…¥æ‚¨çš„QQé‚®ç®±"/><i
                class="btn fa fa-refresh ml-2" aria-hidden="true"
                onclick="emailCode();"></i>
        </div>

        <div></div>
        <div class="mt-3 btn btn-outline-warning">
            è¯·è¾“å…¥æ‚¨è·å–çš„éªŒè¯ç <input id="code" style="width: 200px; height: 30px;"
                             class="ml-5" type="text" placeholder="_è¯·è¾“å…¥æ‚¨çš„éªŒè¯ç "/><i
                class="btn fa fa-refresh ml-2" aria-hidden="true"
                onclick="goinEmail();"></i>
        </div>

        <div></div>
        <div class="mt-3 btn btn-outline-warning">
            æ‰‹æœºä¿®æ”¹ <a href="javascript:" class=" ml-3 btn-outline-primary"
                    onclick="mobilCode();">å‘é€æ‰‹æœºéªŒè¯ç </a><input id="mobil"
                                                             style="width: 200px; height: 30px;" class="ml-3 "
                                                             type="text"
                                                             placeholder="_ä»…æ”¯æŒä¸­å›½å¤§é™†æ‰‹æœº"/><i class="btn fa fa-refresh ml-2"
                                                                                          aria-hidden="true"
                                                                                          onclick="goinMobil();"></i>
        </div>
        <!--
        <div>
            <button data-toggle="popover" data-content="æ·»åŠ åè¯¥åœ°å€ä¸ºé»˜è®¤åœ°å€">
                æäº¤</button>
        </div> -->
        <div class="mt-3"></div>

        <div class="mt-4 text-success">è¯·å¦¥å–„ä¿ç®¡æ‚¨çš„ä¸ªäººä¿¡æ¯ ä¸è¦å°†ä¸ªäººä¿¡æ¯éšæ„å‘ŠçŸ¥ä»–äºº</div>
    </div>
</div>

<script type="text/javascript">
    /* $(function() {
        $("[data-toggle='popover']").popover();
    }); */
    var emailcode = "0";

    function goinAccount() {
        var a = $("#account").val();
        if (a.length_$tag__________10) {
            layer.msg("ä¿¡æ¯æœ‰è¯¯ğŸ’©");
            return false;
        }
        $.ajax({
            url: "updateAccount",
            data: {
                account: a,
            },
            success: function (data) {
                layer.msg("ä¿®æ”¹æˆåŠŸğŸ™‚");
            }
        })
    }

    function goinRealName() {
        var c = $("#realname").val();
        if (c.length_$tag__________10) {
            layer.msg("ä¿¡æ¯æœ‰è¯¯ğŸ·");
            return false;
        }
        $.ajax({
            url: "updateRealName",
            data: {
                realname: c,
            },
            success: function (data) {
                layer.msg("ä¿®æ”¹æˆåŠŸğŸ™‚");
            }
        })
    }

    function goinPassword() {
        var b = $("#password").val();
        if (b.length_$tag__________10) {
            layer.msg("ä¿¡æ¯æœ‰è¯¯âŒ");

            return false;
        }
        $.ajax({
            url: "updatePassword",
            data: {
                password: b,
            },
            success: function (data) {
                layer.alert("ä¿®æ”¹æˆåŠŸğŸ™‚");
            }
        })
    }

    function goinDizhi() {

        var dizhi = $("#dizhi").val();
        if (dizhi.length < 10) {
            layer.msg("è‡³å°‘è¾“å…¥10ä¸ªå­—ç¬¦ğŸ™‚");
            return false;
        }
        $.ajax({
            url: "updateDiZhi",
            data: {
                dizhi: dizhi,
            },
            success: function (data) {
                layer.alert("ä¿®æ”¹æˆåŠŸğŸ™‚");
            }

        })

    }

    function goinEmail() {
        var d = $("#mail").val();
        var code = $("#code").val();
        if (d.indexOf("@") < 1 || d.lastIndexOf(".") < d.indexOf("@") + 2
            || d.lastIndexOf(".") + 2 >= d.length) {
            layer.msg("ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ e-mail åœ°å€ğŸ˜¥");
            return false;
        }
        if (emailcode != code) {
            layer.msg("éªŒè¯ç æœ‰è¯¯ğŸ˜¥");
            return false;
        }
        $.ajax({
            url: "updateEmail",
            data: {
                email: d,
            },
            success: function (data) {
                layer.msg("ä¿®æ”¹æˆåŠŸğŸ™‚");
            }
        })
    }

    function emailCode() {
        var d = $("#mail").val();

        if (d.indexOf("@") < 1 || d.lastIndexOf(".") < d.indexOf("@") + 2
            || d.lastIndexOf(".") + 2 >= d.length) {
            layer.msg("ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ e-mail åœ°å€ğŸ˜¥");
            return false;
        }
        $.ajax({
            url: "getEmailCode",
            data: {
                email: d,
            },
            success: function (data) {
                emailcode = data;
                layer.alert("å‘é€æˆåŠŸğŸ™‚");
            }
        })

    }

    function goinMobil() {
        layer.msg("æŠ±æ­‰çŸ­ä¿¡åŠŸèƒ½æš‚æœªå¼€é€šğŸ˜¥")
    }

    function mobilCode() {

        layer.msg("æŠ±æ­‰çŸ­ä¿¡åŠŸèƒ½æš‚æœªå¼€é€šğŸ˜¥")
    }

    function getMessage() {
        $.ajax({
            url: "getuser_jifen",
            data: {},
            success: function (data) {
                layer.msg(data);
            }
        })
    }
</script>
</body>
</html>